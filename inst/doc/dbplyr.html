<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>CDMConnector and dbplyr</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">CDMConnector and dbplyr</h1>



<div id="set-up" class="section level2">
<h2>Set up</h2>
<p>First let’s load the required packages for the code in this vignette.
If you haven’t already installed them, all the other packages can be
installed using ´install.packages()´</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(CDMConnector)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
</div>
<div id="creating-the-cdm-reference" class="section level2">
<h2>Creating the cdm reference</h2>
<p>Now let´s connect to a duckdb database with the Eunomia data (<a href="https://github.com/OHDSI/Eunomia" class="uri">https://github.com/OHDSI/Eunomia</a>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(duckdb<span class="sc">::</span><span class="fu">duckdb</span>(), <span class="at">dbdir =</span> <span class="fu">eunomia_dir</span>())</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>cdm <span class="ot">&lt;-</span> <span class="fu">cdm_from_con</span>(con, <span class="at">cdm_schema =</span> <span class="st">&quot;main&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>cdm</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # OMOP CDM reference (tbl_duckdb_connection)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Tables: person, observation_period, visit_occurrence, visit_detail, condition_occurrence, drug_exposure, procedure_occurrence, measurement, observation, death, location, care_site, provider, drug_era, dose_era, condition_era, cdm_source, concept, vocabulary, concept_relationship, concept_synonym, concept_ancestor, drug_strength</span></span></code></pre></div>
<p>This cdm object is now what we´ll use going forward. It provides a
reference to the OMOP CDM tables. We can see that these tables are still
in the database, but now we have a reference to each of the ones we
might want to use in our analysis. For example, the person table can be
referenced like so</p>
</div>
<div id="putting-it-all-together" class="section level2">
<h2>Putting it all together</h2>
<p>Say we want to make a histogram of year of birth in the person table.
We can select that variable, bring it into memory, and then use ggplot
to make the histogram.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cdm<span class="sc">$</span>person <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year_of_birth) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year_of_birth)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>If we wanted to make a boxplot for length of observation periods we
could do the computation on the database side, bring in the new variable
into memory, and use ggplot to produce the boxplot</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cdm<span class="sc">$</span>observation_period <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(observation_period_start_date, observation_period_end_date) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">observation_period =</span> (observation_period_end_date <span class="sc">-</span> observation_period_start_date)<span class="sc">/</span><span class="dv">365</span>, <span class="dv">25</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(observation_period) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> observation_period)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="behind-the-scenes" class="section level2">
<h2>Behind the scenes</h2>
<p>We use show_query to check the sql that is being run against
duckdb</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>cdm<span class="sc">$</span>person <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_query</span>()</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;SQL&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; SELECT COUNT(*) AS n</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; FROM main.person</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>cdm<span class="sc">$</span>person <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">median</span>(year_of_birth))<span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_query</span>()</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Missing values are always removed in SQL aggregation functions.</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Use `na.rm = TRUE` to silence this warning</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;SQL&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; SELECT PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY year_of_birth) AS &quot;median(year_of_birth)&quot;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; FROM main.person</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>cdm<span class="sc">$</span>person <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gender =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    gender_concept_id <span class="sc">==</span> <span class="st">&quot;8507&quot;</span> <span class="sc">~</span> <span class="st">&quot;Male&quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    gender_concept_id <span class="sc">==</span> <span class="st">&quot;8532&quot;</span> <span class="sc">~</span> <span class="st">&quot;Female&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>))<span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_query</span>()</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &lt;SQL&gt;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; SELECT</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   *,</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   CASE</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; WHEN (gender_concept_id = &#39;8507&#39;) THEN &#39;Male&#39;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; WHEN (gender_concept_id = &#39;8532&#39;) THEN &#39;Female&#39;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ELSE NULL</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span><span class="re">END</span><span class="co"> AS gender</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; FROM main.person</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(con, <span class="at">disconnect =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div style="margin-bottom:3cm;">

</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
